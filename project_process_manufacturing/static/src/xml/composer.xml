<?xml version="1.0" encoding="UTF-8"?>
<templates>
     <t t-name="mail.chatter.Composer.custom" t-extend="mail.chatter.Composer">
        <t t-jquery=".o_composer_send" t-operation="replace">
            <div class="o_composer_send">
                <t t-if="widget.options.isLog">
                    <button tabindex="3" class="btn btn-primary o_composer_button_send d-none d-md-inline-block" type="button"><t t-esc="widget.options.sendText"/></button>
                </t>    
                <button tabindex="3" class="btn btn-secondary o_composer_button_discard d-none" type="button">Discard</button>
            </div>
        </t>

        <t t-jquery=".o_composer_button_add_attachment" t-operation="after">
            <button tabindex="6" class="btn btn-secondary fa fa-expand o_composer_button_full_composer" type="button" title="Full composer" aria-label="Full composer"/>
        </t>
        <t t-jquery=".o_composer_container" t-operation="before">
            <!-- New message composer -->
            <t t-if="!widget.options.isLog">
                <!-- Text for followers -->
                <small class="o_chatter_composer_info">
                    <b class="text-muted">To: </b>
                    <em class="text-muted">Followers of </em>
                    <b>
                        <t t-if="widget.options.recordName">
                            &#32;&quot;<t t-esc="widget.options.recordName"/>&quot;
                        </t>
                        <t t-if="!widget.options.recordName">
                            this document
                        </t>
                    </b>
                </small>
                <!-- List of followers -->
                <div class="o_composer_suggested_partners">
                    <t t-foreach='widget.suggestedPartners' t-as='recipient'>
                        <div t-attf-title="Add as recipient and follower (reason: #{recipient.reason})" t-att-class="recipient_index > 2 ? 'o_suggested_toggle o_hidden' : ''">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox"
                                       class="custom-control-input"
                                       t-attf-id="o_composer_suggested_partners_p#{recipient_index}"
                                       t-att-checked="recipient.checked ? 'checked' : undefined"
                                       t-att-data-fullname="recipient.full_name"/>
                                <label t-attf-for="o_composer_suggested_partners_p#{recipient_index}" class="custom-control-label">
                                    <t t-esc="recipient.name"/>
                                    <t t-if="recipient.email_address">(<t t-esc="recipient.email_address"/>)</t>
                                </label>
                            </div>
                        </div>
                    </t>
                    <t t-if='widget.suggestedPartners.length > 3'>
                        <a href="#" class='o_suggested_show_more_less o_suggested_toggle'>
                            Show <t t-esc="widget.suggestedPartners.length - 3"/> more
                        </a>
                        <a href="#" class='o_suggested_show_more_less o_suggested_toggle o_hidden'>
                            Show <t t-esc="widget.suggestedPartners.length - 3"/> less
                        </a>
                    </t>
                </div>
            </t>
        </t>
    </t>
</templates>
