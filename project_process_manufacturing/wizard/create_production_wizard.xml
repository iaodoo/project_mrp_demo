<?xml version="1.0"?>
<odoo>
    <record id="view_production_order_request_form" model="ir.ui.view">
        <field name="name">create.production.wizard.form</field>
        <field name="model">create.production.wizard</field>
        <field name="arch" type="xml">
            <form string="Create Production Ordes">
                <group>
                    <group>
                        <field name="task_id" invisible="1"/>
                        <field name="is_service" invisible="1"/>
                        <field name="is_manufacturing" invisible="1"/>
                        <field name="mail_date" required="1"/>
                    </group>
                    <group>
                        <field name="is_change_routing"/>
                        <field name="is_change_raw_material"/>
                    </group>
                    <field name="line_ids" attrs="{'invisible':[('is_manufacturing','=',False)]}">
                        <tree string="Product to Manufacture" editable="bottom" create="false">
                            <field name="sale_order_line_id" readonly="1" string="Product" force_save="1"/>
                           <!--  <field name="product_id" readonly="1" force_save="1" required="1"/> -->
                            <field name="is_change_routing" invisible="1"/>
                            <field name="create_mo"/>
                            <field name="ordered_qty" readonly="1" force_save="1"/>
                            <field name="remaining_qty_to_produce" readonly="1" force_save="1"/>
                            <field name="quantity"/>
                            <field name="routing_ids" invisible="1"/>
                            <field name="change_routing_id" force_save="1"
                                   options="{'no_create': True}"
                                   domain="[('id', 'in', routing_ids)]"
                                   attrs="{'readonly': [('is_change_routing', '!=', True)]}"/>
                        </tree>
                    </field>

                    <field name="component_line_ids" attrs="{'invisible':[('is_manufacturing','=',False)]}">
                        <tree string="Component Product" editable="bottom" create="false">
                            <field name="product_id" readonly="1" force_save="1" required="1"/>
                            <field name="component_product_id" readonly="1" force_save="1" required="1"/>
                            <field name="part_number" required="1" readonly="1" force_save="1"/>
                            <field name="is_change_routing" invisible="1"/>

                            <field name="is_change_raw_material" invisible="1"/>
                            <field name="bom_ids" invisible="1"/>
                            <field name="bom_id" invisible="1"/>
                            <field name="product_ids" invisible="1"/>
                            <field name="routing_ids" invisible="1"/>
                            <field name="is_add_routing" invisible="1"/>
                            <field name="is_add_material_product" invisible="1"/>
                            <field name="change_routing_id" force_save="1"
                                   options="{'no_create': True,'no_open':True}"
                                   domain="[('id', 'in', routing_ids)]"
                                   attrs="{'readonly': ['|', ('is_change_routing', '!=', True),('bom_ids', '=', [])],
                                   'required': [('is_add_routing', '=', True)]}"/>
                            <field name="material_product_id" force_save="1"
                                   options="{'no_create': True,'no_open':True}"
                                   domain="[('id', 'in', product_ids)]"
                                   attrs="{'readonly': ['|',('is_change_raw_material', '!=', True),('product_ids','=', [])],
                                   'required': [('is_add_material_product', '=', True)]}"/>

                        </tree>
                    </field>
                </group>
                <footer>
                    <button name="action_create_production" string="Create Manufacturing Order" type="object"
                            class="oe_highlight" attrs="{'invisible':[('is_manufacturing','=',False)]}"/>
                    <button name="process_sub_task_only" string="Create Sub Task" type="object"
                            class="oe_highlight" attrs="{'invisible':[('is_manufacturing','=',True)]}"/>
                    or
                    <button special="cancel" class="oe_link" string="Cancel" />
                </footer>
            </form>
        </field>
    </record>
</odoo>
